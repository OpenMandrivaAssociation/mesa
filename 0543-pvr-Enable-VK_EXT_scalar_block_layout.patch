From 2adaa765ba9dfd5aa0e51fb95ae5291a9b247394 Mon Sep 17 00:00:00 2001
From: Vlad Schiller <vlad-radu.schiller@imgtec.com>
Date: Tue, 12 Sep 2023 10:08:44 +0100
Subject: [PATCH 543/834] pvr: Enable VK_EXT_scalar_block_layout

Signed-off-by: Vlad Schiller <vlad-radu.schiller@imgtec.com>
Reviewed-by: Matt Coster <matt.coster@imgtec.com>
Part-of: <https://gitlab.freedesktop.org/mesa/mesa/-/merge_requests/25706>
---
 docs/features.txt                   | 2 +-
 src/imagination/vulkan/pvr_device.c | 4 ++++
 2 files changed, 5 insertions(+), 1 deletion(-)

diff --git a/docs/features.txt b/docs/features.txt
index 40f4caba5da..508ebe25ea7 100644
--- a/docs/features.txt
+++ b/docs/features.txt
@@ -469,7 +469,7 @@ Vulkan 1.2 -- all DONE: anv, tu, vn
   VK_EXT_descriptor_indexing                            DONE (anv/gen9+, dzn, lvp, nvk, radv, tu, vn)
   VK_EXT_host_query_reset                               DONE (anv, hasvk, lvp, nvk, radv, tu, v3dv, vn)
   VK_EXT_sampler_filter_minmax                          DONE (anv/gen9+, lvp, nvk, radv, tu, vn)
-  VK_EXT_scalar_block_layout                            DONE (anv, dzn, hasvk, lvp, radv/gfx7+, tu, vn)
+  VK_EXT_scalar_block_layout                            DONE (anv, dzn, hasvk, lvp, pvr, radv/gfx7+, tu, vn)
   VK_EXT_separate_stencil_usage                         DONE (anv, dzn, hasvk, lvp, nvk, radv, tu, v3dv, vn)
   VK_EXT_shader_viewport_index_layer                    DONE (anv, hasvk, lvp, nvk, radv, tu, vn)
 
diff --git a/src/imagination/vulkan/pvr_device.c b/src/imagination/vulkan/pvr_device.c
index 99bb42cb845..eec0db595ec 100644
--- a/src/imagination/vulkan/pvr_device.c
+++ b/src/imagination/vulkan/pvr_device.c
@@ -176,6 +176,7 @@ static void pvr_physical_device_get_supported_extensions(
       .KHR_timeline_semaphore = true,
       .EXT_external_memory_dma_buf = true,
       .EXT_private_data = true,
+      .EXT_scalar_block_layout = true,
       .EXT_tooling_info = true,
    };
 }
@@ -247,6 +248,9 @@ static void pvr_physical_device_get_supported_features(
 
       /* Vulkan 1.3 / VK_EXT_private_data */
       .privateData = true,
+      
+      /* Vulkan 1.2 / VK_EXT_scalar_block_layout */
+      .scalarBlockLayout = true,
    };
 }
 
-- 
2.42.0

