From 12e4fa19df2d6835d0415a5831e8b4ea5fad72d7 Mon Sep 17 00:00:00 2001
From: Vlad Schiller <vlad-radu.schiller@imgtec.com>
Date: Thu, 7 Sep 2023 10:04:03 +0100
Subject: [PATCH 545/834] pvr: Enable VK_KHR_uniform_buffer_standard_layout

Signed-off-by: Vlad Schiller <vlad-radu.schiller@imgtec.com>
Reviewed-by: Matt Coster <matt.coster@imgtec.com>
Part-of: <https://gitlab.freedesktop.org/mesa/mesa/-/merge_requests/25708>
---
 docs/features.txt                   | 2 +-
 src/imagination/vulkan/pvr_device.c | 4 ++++
 2 files changed, 5 insertions(+), 1 deletion(-)

diff --git a/docs/features.txt b/docs/features.txt
index 5b4e2b70970..d66997fccdd 100644
--- a/docs/features.txt
+++ b/docs/features.txt
@@ -464,7 +464,7 @@ Vulkan 1.2 -- all DONE: anv, tu, vn
   VK_KHR_shader_subgroup_extended_types                 DONE (anv/gen8+, hasvk, lvp, radv, tu, vn)
   VK_KHR_spirv_1_4                                      DONE (anv, dzn, hasvk, lvp, nvk, radv, tu, v3dv, vn)
   VK_KHR_timeline_semaphore                             DONE (anv, dzn, hasvk, lvp, nvk, pvr, radv, tu, v3dv, vn)
-  VK_KHR_uniform_buffer_standard_layout                 DONE (anv, dzn, hasvk, lvp, nvk, radv, tu, v3dv, vn)
+  VK_KHR_uniform_buffer_standard_layout                 DONE (anv, dzn, hasvk, lvp, nvk, pvr, radv, tu, v3dv, vn)
   VK_KHR_vulkan_memory_model                            DONE (anv, hasvk, lvp, radv, tu, v3dv, vn)
   VK_EXT_descriptor_indexing                            DONE (anv/gen9+, dzn, lvp, nvk, radv, tu, vn)
   VK_EXT_host_query_reset                               DONE (anv, hasvk, lvp, nvk, radv, tu, v3dv, vn)
diff --git a/src/imagination/vulkan/pvr_device.c b/src/imagination/vulkan/pvr_device.c
index 880479bd94f..cff665fd17e 100644
--- a/src/imagination/vulkan/pvr_device.c
+++ b/src/imagination/vulkan/pvr_device.c
@@ -175,6 +175,7 @@ static void pvr_physical_device_get_supported_extensions(
       .KHR_image_format_list = true,
       .KHR_swapchain = PVR_USE_WSI_PLATFORM,
       .KHR_timeline_semaphore = true,
+      .KHR_uniform_buffer_standard_layout = true,
       .EXT_external_memory_dma_buf = true,
       .EXT_private_data = true,
       .EXT_scalar_block_layout = true,
@@ -247,6 +248,9 @@ static void pvr_physical_device_get_supported_features(
       /* Vulkan 1.2 / VK_KHR_timeline_semaphore */
       .timelineSemaphore = true,
 
+      /* Vulkan 1.2 / VK_KHR_uniform_buffer_standard_layout */
+      .uniformBufferStandardLayout = true,
+
       /* Vulkan 1.3 / VK_EXT_private_data */
       .privateData = true,
       
-- 
2.42.0

