From c8556a8f2e2d2b2016b9e02eecac20102b51671c Mon Sep 17 00:00:00 2001
From: Lionel Landwerlin <lionel.g.landwerlin@intel.com>
Date: Mon, 9 Oct 2023 17:20:12 +0300
Subject: [PATCH 017/834] anv: flag 3DSTATE_RASTER as dirty after simple shader
 primitive
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

Signed-off-by: Lionel Landwerlin <lionel.g.landwerlin@intel.com>
Fixes: 50f6903bd9 ("anv: add new low level emission & dirty state tracking")
Closes: https://gitlab.freedesktop.org/mesa/mesa/-/issues/9899
Reviewed-by: Tapani PÃ¤lli <tapani.palli@intel.com>
Part-of: <https://gitlab.freedesktop.org/mesa/mesa/-/merge_requests/25618>
---
 src/intel/vulkan/genX_simple_shader.c | 1 +
 1 file changed, 1 insertion(+)

diff --git a/src/intel/vulkan/genX_simple_shader.c b/src/intel/vulkan/genX_simple_shader.c
index f045903d83b..ee87eb6ef48 100644
--- a/src/intel/vulkan/genX_simple_shader.c
+++ b/src/intel/vulkan/genX_simple_shader.c
@@ -311,6 +311,7 @@ genX(emit_simpler_shader_init_fragment)(struct anv_simple_shader *state)
 #endif
    BITSET_SET(hw_state->dirty, ANV_GFX_STATE_STREAMOUT);
    BITSET_SET(hw_state->dirty, ANV_GFX_STATE_CLIP);
+   BITSET_SET(hw_state->dirty, ANV_GFX_STATE_RASTER);
    BITSET_SET(hw_state->dirty, ANV_GFX_STATE_SAMPLE_MASK);
    BITSET_SET(hw_state->dirty, ANV_GFX_STATE_MULTISAMPLE);
    BITSET_SET(hw_state->dirty, ANV_GFX_STATE_DEPTH_BOUNDS);
-- 
2.42.0

