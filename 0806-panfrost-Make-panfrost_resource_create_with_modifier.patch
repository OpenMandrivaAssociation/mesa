From 91514e7091879151cb9e258f9d5419864a1c3d57 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Louis-Francis=20Ratt=C3=A9-Boulianne?= <lfrb@collabora.com>
Date: Thu, 31 Aug 2023 12:18:46 -0400
Subject: [PATCH 806/834] panfrost: Make panfrost_resource_create_with_modifier
 public
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

It allows creating a resource when we already know which modifier
we're gonna use.

Signed-off-by: Louis-Francis Ratt√©-Boulianne <lfrb@collabora.com>
Part-of: <https://gitlab.freedesktop.org/mesa/mesa/-/merge_requests/25012>
---
 src/gallium/drivers/panfrost/pan_resource.c | 2 +-
 src/gallium/drivers/panfrost/pan_resource.h | 5 +++++
 2 files changed, 6 insertions(+), 1 deletion(-)

diff --git a/src/gallium/drivers/panfrost/pan_resource.c b/src/gallium/drivers/panfrost/pan_resource.c
index d653fe6ceb5..fd330a793dc 100644
--- a/src/gallium/drivers/panfrost/pan_resource.c
+++ b/src/gallium/drivers/panfrost/pan_resource.c
@@ -619,7 +619,7 @@ panfrost_resource_set_damage_region(struct pipe_screen *screen,
    }
 }
 
-static struct pipe_resource *
+struct pipe_resource *
 panfrost_resource_create_with_modifier(struct pipe_screen *screen,
                                        const struct pipe_resource *template,
                                        uint64_t modifier)
diff --git a/src/gallium/drivers/panfrost/pan_resource.h b/src/gallium/drivers/panfrost/pan_resource.h
index a8237221f96..37bb3ccddc7 100644
--- a/src/gallium/drivers/panfrost/pan_resource.h
+++ b/src/gallium/drivers/panfrost/pan_resource.h
@@ -172,6 +172,11 @@ panfrost_translate_texture_dimension(enum pipe_texture_target t)
    }
 }
 
+struct pipe_resource *
+panfrost_resource_create_with_modifier(struct pipe_screen *screen,
+                                       const struct pipe_resource *template,
+                                       uint64_t modifier);
+
 void pan_resource_modifier_convert(struct panfrost_context *ctx,
                                    struct panfrost_resource *rsrc,
                                    uint64_t modifier, const char *reason);
-- 
2.42.0

