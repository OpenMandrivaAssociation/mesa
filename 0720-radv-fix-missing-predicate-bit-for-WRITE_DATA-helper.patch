From 56a05b92510c82157293718e63c17b1a99c3ebc0 Mon Sep 17 00:00:00 2001
From: Samuel Pitoiset <samuel.pitoiset@gmail.com>
Date: Mon, 23 Oct 2023 13:32:41 +0200
Subject: [PATCH 720/834] radv: fix missing predicate bit for WRITE_DATA helper

Fixes: 12a753f8d2c ("radv: Use new WRITE_DATA helper in more places.")
Signed-off-by: Samuel Pitoiset <samuel.pitoiset@gmail.com>
Part-of: <https://gitlab.freedesktop.org/mesa/mesa/-/merge_requests/25850>
---
 src/amd/vulkan/radv_cs.h | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/src/amd/vulkan/radv_cs.h b/src/amd/vulkan/radv_cs.h
index 25a25ec9e24..a44f60bc58f 100644
--- a/src/amd/vulkan/radv_cs.h
+++ b/src/amd/vulkan/radv_cs.h
@@ -233,7 +233,7 @@ radv_cs_write_data_head(const struct radv_device *device, struct radeon_cmdbuf *
    /* Return the correct cdw at the end of the packet so the caller can assert it. */
    const unsigned cdw_end = radeon_check_space(device->ws, cs, 4 + count);
 
-   radeon_emit(cs, PKT3(PKT3_WRITE_DATA, 2 + count, false));
+   radeon_emit(cs, PKT3(PKT3_WRITE_DATA, 2 + count, predicating));
    radeon_emit(cs, S_370_DST_SEL(V_370_MEM) | S_370_WR_CONFIRM(1) | S_370_ENGINE_SEL(engine_sel));
    radeon_emit(cs, va);
    radeon_emit(cs, va >> 32);
-- 
2.42.0

