From 8aa5ca2f01a4edcf639edabb0a4acfbda806461a Mon Sep 17 00:00:00 2001
From: Boris Brezillon <boris.brezillon@collabora.com>
Date: Tue, 18 Apr 2023 18:38:29 +0200
Subject: [PATCH] pancsf: Don't set RW flags when exporting GEMs for sync-file
 synchronization

---
 src/panfrost/lib/pan_bo.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/src/panfrost/lib/pan_bo.c b/src/panfrost/lib/pan_bo.c
index 808f6db2608..90ff2b784fe 100644
--- a/src/panfrost/lib/pan_bo.c
+++ b/src/panfrost/lib/pan_bo.c
@@ -217,7 +217,7 @@ panfrost_shared_bo_import_sync_handle(struct panfrost_bo *bo, uint32_t flags)
 
    int dmabuf_fd;
    int ret = drmPrimeHandleToFD(bo->dev->fd, bo->gem_handle,
-                                DRM_CLOEXEC | DRM_RDWR, &dmabuf_fd);
+                                DRM_CLOEXEC, &dmabuf_fd);
    if (ret) {
       return ret;
    }
-- 
GitLab

