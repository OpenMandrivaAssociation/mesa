From da1e39faa4eb30981253519e32582d569f96403a Mon Sep 17 00:00:00 2001
From: Lionel Landwerlin <lionel.g.landwerlin@intel.com>
Date: Sun, 17 Sep 2023 13:38:50 +0300
Subject: [PATCH 635/834] util/glsl2spirv: add ability to pass defines

Signed-off-by: Lionel Landwerlin <lionel.g.landwerlin@intel.com>
Reviewed-by: Ivan Briano <ivan.briano@intel.com>
Tested-by: Felix DeGrood <felix.j.degrood@intel.com>
Part-of: <https://gitlab.freedesktop.org/mesa/mesa/-/merge_requests/25361>
---
 src/util/glsl2spirv.py | 9 +++++++++
 1 file changed, 9 insertions(+)

diff --git a/src/util/glsl2spirv.py b/src/util/glsl2spirv.py
index 4df5abd4e27..5e2198a3f74 100644
--- a/src/util/glsl2spirv.py
+++ b/src/util/glsl2spirv.py
@@ -79,6 +79,12 @@ def get_args() -> 'Arguments':
                         action='append',
                         help="Include directory")
 
+    parser.add_argument("-D",
+                        dest="defines",
+                        default=[],
+                        action='append',
+                        help="Defines")
+
     args = parser.parse_args()
     return args
 
@@ -167,6 +173,9 @@ def process_file(args: 'Arguments') -> None:
     for f in args.includes:
         cmd_list.append('-I' + f)
 
+    for d in args.defines:
+        cmd_list.append('-D' + d)
+
     cmd_list.extend([
         '-V',
         '-o', args.output,
-- 
2.42.0

